(()=>{var e={};e.id=718,e.ids=[718],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},91645:e=>{"use strict";e.exports=require("net")},33873:e=>{"use strict";e.exports=require("path")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},74075:e=>{"use strict";e.exports=require("zlib")},33994:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>o,pages:()=>d,routeModule:()=>p,tree:()=>x});var a=t(70260),l=t(28203),r=t(25155),i=t.n(r),n=t(67292),c={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let x=["",{children:["rekap",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,64620)),"/home/fahmy/Documents/Project/project web/absensi/app/rekap/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,19611)),"/home/fahmy/Documents/Project/project web/absensi/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,61129)),"/home/fahmy/Documents/Project/project web/absensi/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"]}],d=["/home/fahmy/Documents/Project/project web/absensi/app/rekap/page.tsx"],o={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:l.RouteKind.APP_PAGE,page:"/rekap/page",pathname:"/rekap",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:x}})},87249:(e,s,t)=>{Promise.resolve().then(t.bind(t,64620))},77521:(e,s,t)=>{Promise.resolve().then(t.bind(t,15856))},15856:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var a=t(45512),l=t(58009),r=t(74485),i=t(25571),n=t(73845);function c(){let[e,s]=(0,l.useState)(new Date().toISOString().slice(0,7)),[t,c]=(0,l.useState)([]),[x,d]=(0,l.useState)(!0),[o,p]=(0,l.useState)([]);(0,l.useCallback)(async()=>{d(!0);try{let[s,t]=await Promise.all([(0,n.w_)(),(0,n.VN)()]);p(t);let a=s.filter(s=>s.tanggal.startsWith(e));c(a)}catch(e){c([]),p([])}d(!1)},[e]);let g=()=>{let e=new Map;return o.forEach(s=>{e.set(s.id,{nama:s.nama,kelas:s.kelas,nis:s.nis,hadir:0,terlambat:0,sakit:0,alpha:0,izin:0,total:0})}),t.forEach(s=>{if(e.has(s.siswaId)){let t=e.get(s.siswaId);t[s.status]++,t.total++}}),Array.from(e.values()).filter(e=>e.total>0).sort((e,s)=>s.total-e.total)},m=(()=>{let s=new Date(parseInt(e.split("-")[0]),parseInt(e.split("-")[1]),0).getDate(),a=[...new Set(t.map(e=>e.tanggal))].length,l=t.filter(e=>"hadir"===e.status).length,r=t.filter(e=>"terlambat"===e.status).length;return{totalDays:s,activeDays:a,hadir:l,terlambat:r,sakit:t.filter(e=>"sakit"===e.status).length,alpha:t.filter(e=>"alpha"===e.status).length,izin:t.filter(e=>"izin"===e.status).length,total:t.length}})(),h=g(),u=(()=>{let e=new Map;return t.forEach(s=>{e.has(s.tanggal)||e.set(s.tanggal,{tanggal:s.tanggal,hadir:0,terlambat:0,sakit:0,alpha:0,izin:0,total:0});let t=e.get(s.tanggal);t[s.status]++,t.total++}),Array.from(e.values()).sort((e,s)=>new Date(s.tanggal).getTime()-new Date(e.tanggal).getTime())})();return(0,a.jsx)(i.A,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(r.A,{}),(0,a.jsxs)("main",{className:"p-4 lg:p-6",children:[(0,a.jsx)("div",{className:"mb-6 lg:mb-8",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl lg:text-2xl font-bold text-gray-900 mb-2",children:"Rekap Bulanan"}),(0,a.jsx)("p",{className:"text-sm lg:text-base text-gray-600",children:"Laporan kehadiran siswa per bulan dengan analisis lengkap"})]}),(0,a.jsxs)("button",{onClick:()=>{let s=new Blob([["Nama,Kelas,NIS,Hadir,Terlambat,Sakit,Alpha,Izin,Total",...g().map(e=>[e.nama,e.kelas,e.nis,e.hadir,e.terlambat,e.sakit,e.alpha,e.izin,e.total].join(","))].join("\n").replace(/\\n/g,"\n")],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");t.href=URL.createObjectURL(s),t.download=`rekap-absensi-${e}.csv`,t.click()},className:"bg-green-600 text-white px-4 py-2 lg:py-3 rounded-lg font-medium hover:bg-green-700 cursor-pointer whitespace-nowrap flex items-center justify-center space-x-2 text-sm lg:text-base",children:[(0,a.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-download-line"})}),(0,a.jsx)("span",{children:"Export CSV"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 lg:gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-4 lg:p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Pilih Bulan"})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bulan dan Tahun"}),(0,a.jsx)("input",{type:"month",value:e,onChange:e=>s(e.target.value),className:"w-full p-2 lg:p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm lg:text-base"})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg w-full",children:[(0,a.jsx)("p",{className:"text-xs lg:text-sm text-blue-600 mb-1",children:"Periode Terpilih"}),(0,a.jsx)("p",{className:"text-sm lg:text-base font-semibold text-blue-900",children:new Date(e+"-01").toLocaleDateString("id-ID",{month:"long",year:"numeric"})})]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-3 lg:gap-4",children:[(0,a.jsx)("div",{className:"bg-white p-3 lg:p-6 rounded-xl shadow-sm border",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-2 lg:space-y-0 lg:space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 lg:w-12 lg:h-12 bg-blue-500 rounded-lg flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-calendar-line text-white text-sm lg:text-xl"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs lg:text-sm text-gray-600",children:"Total Hari Aktif"}),(0,a.jsx)("p",{className:"text-lg lg:text-2xl font-bold text-gray-900",children:m.activeDays})]})]})}),(0,a.jsx)("div",{className:"bg-white p-3 lg:p-6 rounded-xl shadow-sm border",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-2 lg:space-y-0 lg:space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 lg:w-12 lg:h-12 bg-green-500 rounded-lg flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-user-line text-white text-sm lg:text-xl"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs lg:text-sm text-gray-600",children:"Hadir"}),(0,a.jsx)("p",{className:"text-lg lg:text-2xl font-bold text-gray-900",children:m.hadir})]})]})}),(0,a.jsx)("div",{className:"bg-white p-3 lg:p-6 rounded-xl shadow-sm border",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-2 lg:space-y-0 lg:space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 lg:w-12 lg:h-12 bg-yellow-500 rounded-lg flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-time-line text-white text-sm lg:text-xl"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs lg:text-sm text-gray-600",children:"Terlambat"}),(0,a.jsx)("p",{className:"text-lg lg:text-2xl font-bold text-gray-900",children:m.terlambat})]})]})}),(0,a.jsx)("div",{className:"bg-white p-3 lg:p-6 rounded-xl shadow-sm border",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-2 lg:space-y-0 lg:space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 lg:w-12 lg:h-12 bg-blue-500 rounded-lg flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-heart-pulse-line text-white text-sm lg:text-xl"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs lg:text-sm text-gray-600",children:"Sakit"}),(0,a.jsx)("p",{className:"text-lg lg:text-2xl font-bold text-gray-900",children:m.sakit})]})]})}),(0,a.jsx)("div",{className:"bg-white p-3 lg:p-6 rounded-xl shadow-sm border",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-2 lg:space-y-0 lg:space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 lg:w-12 lg:h-12 bg-red-500 rounded-lg flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-user-unfollow-line text-white text-sm lg:text-xl"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs lg:text-sm text-gray-600",children:"Alpha"}),(0,a.jsx)("p",{className:"text-lg lg:text-2xl font-bold text-gray-900",children:m.alpha})]})]})}),(0,a.jsx)("div",{className:"bg-white p-3 lg:p-6 rounded-xl shadow-sm border",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-2 lg:space-y-0 lg:space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 lg:w-12 lg:h-12 bg-purple-500 rounded-lg flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-user-star-line text-white text-sm lg:text-xl"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs lg:text-sm text-gray-600",children:"Izin"}),(0,a.jsx)("p",{className:"text-lg lg:text-2xl font-bold text-gray-900",children:m.izin})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 lg:gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border",children:[(0,a.jsx)("div",{className:"p-4 lg:p-6 border-b",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Rekap Per Siswa"})}),(0,a.jsx)("div",{className:"p-4 lg:p-6",children:x?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):0===h.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-user-line text-gray-400 text-2xl"})}),(0,a.jsx)("p",{className:"text-gray-600",children:"Belum ada data untuk bulan ini"})]}):(0,a.jsx)("div",{className:"space-y-3 max-h-80 lg:max-h-96 overflow-y-auto",children:h.map((e,s)=>(0,a.jsxs)("div",{className:"p-3 lg:p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"text-sm lg:text-base font-medium text-gray-900 truncate",children:e.nama}),(0,a.jsxs)("p",{className:"text-xs lg:text-sm text-gray-500",children:[e.kelas," - ",e.nis]})]}),(0,a.jsxs)("div",{className:"text-right ml-3",children:[(0,a.jsx)("p",{className:"text-base lg:text-lg font-bold text-gray-900",children:e.total}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"total absensi"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 lg:gap-2 text-xs",children:[(0,a.jsxs)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded whitespace-nowrap",children:["H: ",e.hadir]}),(0,a.jsxs)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded whitespace-nowrap",children:["T: ",e.terlambat]}),(0,a.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded whitespace-nowrap",children:["S: ",e.sakit]}),(0,a.jsxs)("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded whitespace-nowrap",children:["A: ",e.alpha]}),(0,a.jsxs)("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded whitespace-nowrap",children:["I: ",e.izin]})]})]},s))})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border",children:[(0,a.jsx)("div",{className:"p-4 lg:p-6 border-b",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Rekap Harian"})}),(0,a.jsx)("div",{className:"p-4 lg:p-6",children:x?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):0===u.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-calendar-line text-gray-400 text-2xl"})}),(0,a.jsx)("p",{className:"text-gray-600",children:"Belum ada data untuk bulan ini"})]}):(0,a.jsx)("div",{className:"space-y-3 max-h-80 lg:max-h-96 overflow-y-auto",children:u.map((e,s)=>(0,a.jsxs)("div",{className:"p-3 lg:p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"text-sm lg:text-base font-medium text-gray-900",children:new Date(e.tanggal).toLocaleDateString("id-ID",{weekday:"short",day:"numeric",month:"short"})}),(0,a.jsx)("p",{className:"text-xs lg:text-sm text-gray-500",children:e.tanggal})]}),(0,a.jsxs)("div",{className:"text-right ml-3",children:[(0,a.jsx)("p",{className:"text-base lg:text-lg font-bold text-gray-900",children:e.total}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"total absensi"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 lg:gap-2 text-xs",children:[(0,a.jsxs)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded whitespace-nowrap",children:["H: ",e.hadir]}),(0,a.jsxs)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded whitespace-nowrap",children:["T: ",e.terlambat]}),(0,a.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded whitespace-nowrap",children:["S: ",e.sakit]}),(0,a.jsxs)("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded whitespace-nowrap",children:["A: ",e.alpha]}),(0,a.jsxs)("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded whitespace-nowrap",children:["I: ",e.izin]})]})]},s))})})]})]})]})]})]})})}},64620:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/fahmy/Documents/Project/project web/absensi/app/rekap/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/fahmy/Documents/Project/project web/absensi/app/rekap/page.tsx","default")}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[388,730,360],()=>t(33994));module.exports=a})();