(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{37849:(e,t,a)=>{Promise.resolve().then(a.bind(a,67753))},67753:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var s=a(95155),l=a(12115),r=a(4719);function i(e){let{title:t,value:a,icon:l,color:r,change:i}=e;return(0,s.jsx)("div",{className:"bg-white p-3 lg:p-6 rounded-xl shadow-sm border hover:shadow-md transition-shadow cursor-pointer",children:(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-xs lg:text-sm font-medium text-gray-600 mb-1 lg:mb-0",children:t}),(0,s.jsx)("p",{className:"text-lg lg:text-2xl font-bold text-gray-900 lg:mt-2",children:a}),i&&(0,s.jsx)("p",{className:"text-xs lg:text-sm text-green-600 mt-1 truncate",children:i})]}),(0,s.jsx)("div",{className:"w-8 h-8 lg:w-12 lg:h-12 ".concat(r," rounded-lg flex items-center justify-center mt-2 lg:mt-0 self-start lg:self-auto"),children:(0,s.jsx)("i",{className:"".concat(l," text-white text-sm lg:text-xl")})})]})})}var n=a(58581),c=a(29844),d=a(15255),x=a(12800),m=a(66963),g=a(27112),o=a(90518),h=a(45509);function u(){let[e,t]=(0,l.useState)([]);(0,l.useEffect)(()=>{a()},[]);let a=async()=>{try{let e=await (0,h.w_)(),a=[],s=["Min","Sen","Sel","Rab","Kam","Jum","Sab"];for(let t=6;t>=0;t--){let l=new Date;l.setDate(l.getDate()-t);let r=l.toISOString().split("T")[0],i=e.filter(e=>e.tanggal===r),n=i.filter(e=>"hadir"===e.status).length,c=i.filter(e=>"terlambat"===e.status).length,d=i.filter(e=>"sakit"===e.status).length,x=i.filter(e=>"alpha"===e.status).length;a.push({name:s[l.getDay()],hadir:n+c,tidak:d+x})}t(a)}catch(e){t([])}};return(0,s.jsxs)("div",{className:"bg-white p-4 lg:p-6 rounded-xl shadow-sm border",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4 lg:mb-6",children:[(0,s.jsx)("h3",{className:"text-base lg:text-lg font-semibold text-gray-900",children:"Grafik Kehadiran Mingguan"}),(0,s.jsxs)("div",{className:"flex items-center space-x-3 lg:space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-2"}),(0,s.jsx)("span",{className:"text-xs lg:text-sm text-gray-600",children:"Hadir"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-2"}),(0,s.jsx)("span",{className:"text-xs lg:text-sm text-gray-600",children:"Tidak Hadir"})]})]})]}),(0,s.jsx)(n.u,{width:"100%",height:200,children:(0,s.jsxs)(c.Q,{data:e,margin:{top:10,right:30,left:0,bottom:0},children:[(0,s.jsx)(d.d,{strokeDasharray:"3 3"}),(0,s.jsx)(x.W,{dataKey:"name",tick:{fontSize:12},axisLine:!1}),(0,s.jsx)(m.h,{tick:{fontSize:12},axisLine:!1}),(0,s.jsx)(g.m,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"12px"}}),(0,s.jsx)(o.G,{type:"monotone",dataKey:"hadir",stackId:"1",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.6}),(0,s.jsx)(o.G,{type:"monotone",dataKey:"tidak",stackId:"1",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.6})]})})]})}var f=a(94583);function b(){let[e,t]=(0,l.useState)("Semua"),[a,r]=(0,l.useState)([]);(0,l.useEffect)(()=>{i()},[]);let i=async()=>{let e=new Date().toISOString().split("T")[0];try{let t=(await (0,h.w_)()).filter(t=>t.tanggal===e).map(e=>({id:e.siswaId,name:e.nama,class:e.kelas,status:n(e.status),time:e.waktu||"-",avatar:(0,f.IM)(e.nama)}));r(t)}catch(e){r([])}},n=e=>{switch(e){case"hadir":default:return"Hadir";case"terlambat":return"Terlambat";case"sakit":return"Sakit";case"alpha":return"Alpha"}},c=e=>{switch(e){case"Hadir":return"bg-green-100 text-green-800";case"Terlambat":return"bg-yellow-100 text-yellow-800";case"Sakit":return"bg-blue-100 text-blue-800";case"Alpha":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},d="Semua"===e?a:a.filter(t=>t.status===e);return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border",children:[(0,s.jsxs)("div",{className:"p-4 lg:p-6 border-b",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 lg:gap-4 mb-4",children:[(0,s.jsx)("h3",{className:"text-base lg:text-lg font-semibold text-gray-900",children:"Status Siswa Hari Ini"}),(0,s.jsxs)("div",{className:"text-xs lg:text-sm text-gray-500",children:["Total: ",a.length," siswa"]})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:["Semua","Hadir","Terlambat","Sakit","Alpha"].map(a=>(0,s.jsx)("button",{onClick:()=>t(a),className:"px-3 lg:px-4 py-1.5 lg:py-2 rounded-full text-xs lg:text-sm font-medium whitespace-nowrap cursor-pointer transition-colors ".concat(e===a?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:a},a))})]}),(0,s.jsx)("div",{className:"p-4 lg:p-6",children:(0,s.jsx)("div",{className:"space-y-3 lg:space-y-4 max-h-80 lg:max-h-96 overflow-y-auto",children:d.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 lg:p-4 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-blue-600 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-medium text-xs lg:text-sm",children:e.avatar})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"text-sm lg:text-base font-medium text-gray-900 truncate",children:e.name}),(0,s.jsx)("p",{className:"text-xs lg:text-sm text-gray-500",children:e.class})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 lg:space-x-3 ml-3",children:[(0,s.jsx)("span",{className:"text-xs lg:text-sm text-gray-600 hidden sm:inline",children:e.time}),(0,s.jsx)("span",{className:"px-2 lg:px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap ".concat(c(e.status)),children:e.status})]})]},e.id))})})]})}function p(){let[e,t]=(0,l.useState)([]);(0,l.useEffect)(()=>{a()},[]);let a=async()=>{try{let e=(await (0,h.w_)()).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()).slice(0,5).map((e,t)=>({id:e.id||t,type:"attendance",message:"".concat(e.nama," dicatat ").concat(r(e.status)," pada ").concat(new Date(e.tanggal).toLocaleDateString("id-ID")),user:"Admin",time:c(e.timestamp),icon:i(e.status),color:n(e.status)}));t(e)}catch(e){t([])}},r=e=>{switch(e){case"hadir":return"hadir";case"terlambat":return"terlambat";case"sakit":return"sakit";case"alpha":return"alpha";default:return e}},i=e=>{switch(e){case"hadir":default:return"ri-user-check-line";case"terlambat":return"ri-time-line";case"sakit":return"ri-heart-pulse-line";case"alpha":return"ri-user-unfollow-line"}},n=e=>{switch(e){case"hadir":return"text-green-600 bg-green-50";case"terlambat":return"text-yellow-600 bg-yellow-50";case"sakit":return"text-blue-600 bg-blue-50";case"alpha":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},c=e=>{let t=new Date,a=new Date(e),s=t.getTime()-a.getTime(),l=Math.floor(s/6e4),r=Math.floor(s/36e5),i=Math.floor(s/864e5);return l<60?"".concat(l," menit yang lalu"):r<24?"".concat(r," jam yang lalu"):"".concat(i," hari yang lalu")};return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border",children:[(0,s.jsx)("div",{className:"p-4 lg:p-6 border-b",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 lg:gap-4",children:[(0,s.jsx)("h3",{className:"text-base lg:text-lg font-semibold text-gray-900",children:"Aktivitas Terbaru"}),(0,s.jsx)("div",{className:"text-xs lg:text-sm text-gray-500",children:"Pembaruan realtime sistem absensi"})]})}),(0,s.jsx)("div",{className:"p-4 lg:p-6",children:(0,s.jsx)("div",{className:"space-y-3 lg:space-y-4 max-h-80 lg:max-h-96 overflow-y-auto",children:e.map(e=>(0,s.jsxs)("div",{className:"flex items-start space-x-3 lg:space-x-4 p-3 lg:p-4 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer",children:[(0,s.jsx)("div",{className:"w-8 h-8 lg:w-10 lg:h-10 rounded-full flex items-center justify-center ".concat(e.color),children:(0,s.jsx)("i",{className:"".concat(e.icon," text-sm lg:text-base")})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm lg:text-base text-gray-900 mb-1",children:e.message}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 lg:gap-2",children:[(0,s.jsxs)("p",{className:"text-xs lg:text-sm text-gray-500",children:["oleh ",e.user]}),(0,s.jsx)("p",{className:"text-xs lg:text-sm text-gray-400",children:e.time})]})]})]},e.id))})})]})}function j(){let[e,t]=(0,l.useState)({totalSiswa:0,hadirHariIni:0,terlambat:0,tidakHadir:0});(0,l.useEffect)(()=>{a()},[]);let a=async()=>{let[e,a]=await Promise.all([(0,h.VN)(),(0,h.w_)()]),s=e.length,l=new Date().toISOString().split("T")[0],r=a.filter(e=>e.tanggal===l),i=r.filter(e=>"hadir"===e.status).length,n=r.filter(e=>"terlambat"===e.status).length;t({totalSiswa:s,hadirHariIni:i,terlambat:n,tidakHadir:r.filter(e=>"sakit"===e.status).length+r.filter(e=>"alpha"===e.status).length})};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(r.A,{}),(0,s.jsxs)("main",{className:"p-4 lg:p-6",children:[(0,s.jsxs)("div",{className:"mb-6 lg:mb-8",children:[(0,s.jsx)("h1",{className:"text-xl lg:text-2xl font-bold text-gray-900 mb-2",children:"Dashboard Absensi"}),(0,s.jsx)("p",{className:"text-sm lg:text-base text-gray-600",children:"Selamat datang! Berikut ringkasan absensi siswa hari ini"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 lg:gap-6 mb-6 lg:mb-8",children:[(0,s.jsx)(i,{title:"Total Siswa",value:e.totalSiswa.toString(),icon:"ri-user-line",color:"bg-blue-500",change:"+2% dari bulan lalu"}),(0,s.jsx)(i,{title:"Hadir Hari Ini",value:e.hadirHariIni.toString(),icon:"ri-user-check-line",color:"bg-green-500",change:"".concat((e.hadirHariIni/e.totalSiswa*100).toFixed(1),"% kehadiran")}),(0,s.jsx)(i,{title:"Terlambat",value:e.terlambat.toString(),icon:"ri-time-line",color:"bg-yellow-500",change:"".concat((e.terlambat/e.totalSiswa*100).toFixed(1),"% dari total")}),(0,s.jsx)(i,{title:"Tidak Hadir",value:e.tidakHadir.toString(),icon:"ri-user-unfollow-line",color:"bg-red-500",change:"".concat((e.tidakHadir/e.totalSiswa*100).toFixed(1),"% dari total")})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 lg:gap-6 mb-6 lg:mb-8",children:[(0,s.jsx)(u,{}),(0,s.jsx)(b,{})]}),(0,s.jsx)(p,{})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[30,462,357,441,517,358],()=>t(37849)),_N_E=e.O()}]);