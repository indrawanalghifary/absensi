(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[718],{1647:(e,s,t)=>{Promise.resolve().then(t.bind(t,6464))},6464:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var a=t(95155),l=t(12115),i=t(4719),r=t(45509);function n(){let[e,s]=(0,l.useState)(new Date().toISOString().slice(0,7)),[t,n]=(0,l.useState)([]),[c,x]=(0,l.useState)(!0),[d,m]=(0,l.useState)([]),h=(0,l.useCallback)(async()=>{x(!0);try{let[s,t]=await Promise.all([(0,r.w_)(),(0,r.VN)()]);m(t);let a=s.filter(s=>s.tanggal.startsWith(e));n(a)}catch(e){n([]),m([])}x(!1)},[e]);(0,l.useEffect)(()=>{h()},[e,h]);let g=()=>{let e=new Map;return d.forEach(s=>{e.set(s.id,{nama:s.nama,kelas:s.kelas,nis:s.nis,hadir:0,terlambat:0,sakit:0,alpha:0,total:0})}),t.forEach(s=>{if(e.has(s.siswaId)){let t=e.get(s.siswaId);t[s.status]++,t.total++}}),Array.from(e.values()).filter(e=>e.total>0).sort((e,s)=>s.total-e.total)},o=(()=>{let s=new Date(parseInt(e.split("-")[0]),parseInt(e.split("-")[1]),0).getDate(),a=[...new Set(t.map(e=>e.tanggal))].length,l=t.filter(e=>"hadir"===e.status).length;return{totalDays:s,activeDays:a,hadir:l,terlambat:t.filter(e=>"terlambat"===e.status).length,sakit:t.filter(e=>"sakit"===e.status).length,alpha:t.filter(e=>"alpha"===e.status).length,total:t.length}})(),p=g(),u=(()=>{let e=new Map;return t.forEach(s=>{e.has(s.tanggal)||e.set(s.tanggal,{tanggal:s.tanggal,hadir:0,terlambat:0,sakit:0,alpha:0,total:0});let t=e.get(s.tanggal);t[s.status]++,t.total++}),Array.from(e.values()).sort((e,s)=>new Date(s.tanggal).getTime()-new Date(e.tanggal).getTime())})();return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(i.A,{}),(0,a.jsxs)("main",{className:"p-4 lg:p-6",children:[(0,a.jsx)("div",{className:"mb-6 lg:mb-8",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl lg:text-2xl font-bold text-gray-900 mb-2",children:"Rekap Bulanan"}),(0,a.jsx)("p",{className:"text-sm lg:text-base text-gray-600",children:"Laporan kehadiran siswa per bulan dengan analisis lengkap"})]}),(0,a.jsxs)("button",{onClick:()=>{let s=new Blob([["Nama,Kelas,NIS,Hadir,Terlambat,Sakit,Alpha,Total",...g().map(e=>[e.nama,e.kelas,e.nis,e.hadir,e.terlambat,e.sakit,e.alpha,e.total].join(","))].join("\\n")],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");t.href=URL.createObjectURL(s),t.download="rekap-absensi-".concat(e,".csv"),t.click()},className:"bg-green-600 text-white px-4 py-2 lg:py-3 rounded-lg font-medium hover:bg-green-700 cursor-pointer whitespace-nowrap flex items-center justify-center space-x-2 text-sm lg:text-base",children:[(0,a.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-download-line"})}),(0,a.jsx)("span",{children:"Export CSV"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 lg:gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-4 lg:p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Pilih Bulan"})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bulan dan Tahun"}),(0,a.jsx)("input",{type:"month",value:e,onChange:e=>s(e.target.value),className:"w-full p-2 lg:p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm lg:text-base"})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg w-full",children:[(0,a.jsx)("p",{className:"text-xs lg:text-sm text-blue-600 mb-1",children:"Periode Terpilih"}),(0,a.jsx)("p",{className:"text-sm lg:text-base font-semibold text-blue-900",children:new Date(e+"-01").toLocaleDateString("id-ID",{month:"long",year:"numeric"})})]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-3 lg:gap-4",children:[(0,a.jsx)("div",{className:"bg-white p-3 lg:p-6 rounded-xl shadow-sm border",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-2 lg:space-y-0 lg:space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 lg:w-12 lg:h-12 bg-blue-500 rounded-lg flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-calendar-line text-white text-sm lg:text-xl"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs lg:text-sm text-gray-600",children:"Total Hari Aktif"}),(0,a.jsx)("p",{className:"text-lg lg:text-2xl font-bold text-gray-900",children:o.activeDays})]})]})}),(0,a.jsx)("div",{className:"bg-white p-3 lg:p-6 rounded-xl shadow-sm border",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-2 lg:space-y-0 lg:space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 lg:w-12 lg:h-12 bg-green-500 rounded-lg flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-user-check-line text-white text-sm lg:text-xl"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs lg:text-sm text-gray-600",children:"Hadir"}),(0,a.jsx)("p",{className:"text-lg lg:text-2xl font-bold text-gray-900",children:o.hadir})]})]})}),(0,a.jsx)("div",{className:"bg-white p-3 lg:p-6 rounded-xl shadow-sm border",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-2 lg:space-y-0 lg:space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 lg:w-12 lg:h-12 bg-yellow-500 rounded-lg flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-time-line text-white text-sm lg:text-xl"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs lg:text-sm text-gray-600",children:"Terlambat"}),(0,a.jsx)("p",{className:"text-lg lg:text-2xl font-bold text-gray-900",children:o.terlambat})]})]})}),(0,a.jsx)("div",{className:"bg-white p-3 lg:p-6 rounded-xl shadow-sm border",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-2 lg:space-y-0 lg:space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 lg:w-12 lg:h-12 bg-blue-500 rounded-lg flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-heart-pulse-line text-white text-sm lg:text-xl"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs lg:text-sm text-gray-600",children:"Sakit"}),(0,a.jsx)("p",{className:"text-lg lg:text-2xl font-bold text-gray-900",children:o.sakit})]})]})}),(0,a.jsx)("div",{className:"bg-white p-3 lg:p-6 rounded-xl shadow-sm border",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-2 lg:space-y-0 lg:space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 lg:w-12 lg:h-12 bg-red-500 rounded-lg flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-user-unfollow-line text-white text-sm lg:text-xl"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs lg:text-sm text-gray-600",children:"Alpha"}),(0,a.jsx)("p",{className:"text-lg lg:text-2xl font-bold text-gray-900",children:o.alpha})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 lg:gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border",children:[(0,a.jsx)("div",{className:"p-4 lg:p-6 border-b",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Rekap Per Siswa"})}),(0,a.jsx)("div",{className:"p-4 lg:p-6",children:c?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):0===p.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-user-line text-gray-400 text-2xl"})}),(0,a.jsx)("p",{className:"text-gray-600",children:"Belum ada data untuk bulan ini"})]}):(0,a.jsx)("div",{className:"space-y-3 max-h-80 lg:max-h-96 overflow-y-auto",children:p.map((e,s)=>(0,a.jsxs)("div",{className:"p-3 lg:p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"text-sm lg:text-base font-medium text-gray-900 truncate",children:e.nama}),(0,a.jsxs)("p",{className:"text-xs lg:text-sm text-gray-500",children:[e.kelas," - ",e.nis]})]}),(0,a.jsxs)("div",{className:"text-right ml-3",children:[(0,a.jsx)("p",{className:"text-base lg:text-lg font-bold text-gray-900",children:e.total}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"total absensi"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 lg:gap-2 text-xs",children:[(0,a.jsxs)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded whitespace-nowrap",children:["H: ",e.hadir]}),(0,a.jsxs)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded whitespace-nowrap",children:["T: ",e.terlambat]}),(0,a.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded whitespace-nowrap",children:["S: ",e.sakit]}),(0,a.jsxs)("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded whitespace-nowrap",children:["A: ",e.alpha]})]})]},s))})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border",children:[(0,a.jsx)("div",{className:"p-4 lg:p-6 border-b",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Rekap Harian"})}),(0,a.jsx)("div",{className:"p-4 lg:p-6",children:c?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):0===u.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-calendar-line text-gray-400 text-2xl"})}),(0,a.jsx)("p",{className:"text-gray-600",children:"Belum ada data untuk bulan ini"})]}):(0,a.jsx)("div",{className:"space-y-3 max-h-80 lg:max-h-96 overflow-y-auto",children:u.map((e,s)=>(0,a.jsxs)("div",{className:"p-3 lg:p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"text-sm lg:text-base font-medium text-gray-900",children:new Date(e.tanggal).toLocaleDateString("id-ID",{weekday:"short",day:"numeric",month:"short"})}),(0,a.jsx)("p",{className:"text-xs lg:text-sm text-gray-500",children:e.tanggal})]}),(0,a.jsxs)("div",{className:"text-right ml-3",children:[(0,a.jsx)("p",{className:"text-base lg:text-lg font-bold text-gray-900",children:e.total}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"total absensi"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 lg:gap-2 text-xs",children:[(0,a.jsxs)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded whitespace-nowrap",children:["H: ",e.hadir]}),(0,a.jsxs)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded whitespace-nowrap",children:["T: ",e.terlambat]}),(0,a.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded whitespace-nowrap",children:["S: ",e.sakit]}),(0,a.jsxs)("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded whitespace-nowrap",children:["A: ",e.alpha]})]})]},s))})})]})]})]})]})]})}},4719:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});var a=t(95155),l=t(48173),i=t.n(l),r=t(12115);function n(){let[e,s]=(0,r.useState)(!1);return(0,a.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,a.jsxs)("div",{className:"px-4 lg:px-6 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-8",children:[(0,a.jsx)(i(),{href:"/",className:"text-xl lg:text-2xl font-pacifico text-blue-600",children:"AbsensiKu"}),(0,a.jsxs)("nav",{className:"hidden lg:flex space-x-6",children:[(0,a.jsx)(i(),{href:"/",className:"text-gray-700 hover:text-blue-600 font-medium",children:"Dashboard"}),(0,a.jsx)(i(),{href:"/absensi",className:"text-gray-700 hover:text-blue-600 font-medium",children:"Absensi Harian"}),(0,a.jsx)(i(),{href:"/rekap",className:"text-gray-700 hover:text-blue-600 font-medium",children:"Rekap Bulanan"}),(0,a.jsx)(i(),{href:"/siswa",className:"text-gray-700 hover:text-blue-600 font-medium",children:"Data Siswa"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"hidden lg:flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-6 h-6 flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-notification-line text-gray-600"})}),(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-user-line text-white text-sm"})})]}),(0,a.jsx)("button",{onClick:()=>s(!e),className:"lg:hidden w-8 h-8 flex items-center justify-center text-gray-600 cursor-pointer",children:(0,a.jsx)("i",{className:"ri-".concat(e?"close":"menu","-line text-xl")})})]})]}),e&&(0,a.jsx)("nav",{className:"lg:hidden mt-4 pt-4 border-t",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,a.jsx)(i(),{href:"/",className:"text-gray-700 hover:text-blue-600 font-medium py-2",onClick:()=>s(!1),children:"Dashboard"}),(0,a.jsx)(i(),{href:"/absensi",className:"text-gray-700 hover:text-blue-600 font-medium py-2",onClick:()=>s(!1),children:"Absensi Harian"}),(0,a.jsx)(i(),{href:"/rekap",className:"text-gray-700 hover:text-blue-600 font-medium py-2",onClick:()=>s(!1),children:"Rekap Bulanan"}),(0,a.jsx)(i(),{href:"/siswa",className:"text-gray-700 hover:text-blue-600 font-medium py-2",onClick:()=>s(!1),children:"Data Siswa"}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-2 mt-4 pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-user-line text-white text-sm"})}),(0,a.jsx)("span",{className:"text-gray-700 font-medium",children:"Admin"})]}),(0,a.jsx)("div",{className:"w-6 h-6 flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-notification-line text-gray-600"})})]})]})})]})})}},45509:(e,s,t)=>{"use strict";t.d(s,{hn:()=>x,jw:()=>i,LP:()=>n,w_:()=>c,VN:()=>l,dp:()=>r});let a=(0,t(96232).UU)("https://xbunbpuxwnappvosgxex.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhidW5icHV4d25hcHB2b3NneGV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM5MzkwNzIsImV4cCI6MjA2OTUxNTA3Mn0.fKsmcjaSQ5FsVKDtMqaTXO5tYDHxr1JWbORu6py2fx4");async function l(){let{data:e,error:s}=await a.from("students").select("*");if(s)throw s;return e}async function i(e){let{error:s}=await a.from("students").insert([e]);if(s)throw s}async function r(e){let{error:s}=await a.from("students").update(e).eq("id",e.id);if(s)throw s}async function n(e){let{error:s}=await a.from("students").delete().eq("id",e);if(s)throw s}async function c(){let{data:e,error:s}=await a.from("absensi").select("*");if(s)throw s;return e}async function x(e){let{error:s}=await a.from("absensi").insert([e]);if(s)throw s}}},e=>{var s=s=>e(e.s=s);e.O(0,[30,441,517,358],()=>s(1647)),_N_E=e.O()}]);